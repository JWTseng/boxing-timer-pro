<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>图标对齐问题 - 数学分析与精确修复</title>
    <style>
        body {
            margin: 0;
            padding: 40px;
            background: #E8D85C;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        .analysis-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .demo-section {
            margin: 30px 0;
            padding: 20px;
            border: 2px solid #f0f0f0;
            border-radius: 10px;
        }

        /* 参考圆形 */
        .reference-circle {
            width: 60px;
            height: 60px;
            border: 2px solid red;
            border-radius: 50%;
            position: relative;
            margin: 20px auto;
            background: rgba(255, 0, 0, 0.1);
        }

        .reference-circle::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 2px;
            height: 2px;
            background: red;
            border-radius: 50%;
            transform: translate(-50%, -50%);
        }

        /* 当前的三角形 */
        .current-triangle {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-left: 18px solid #333;
            border-top: 12px solid transparent;
            border-bottom: 12px solid transparent;
            transform: translate(-42%, -50%);
        }

        /* 数学精确的三角形 */
        .perfect-triangle {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-left: 18px solid #00ff00;
            border-top: 12px solid transparent;
            border-bottom: 12px solid transparent;
            transform: translate(-38.89%, -50%);
        }

        /* SVG解决方案 */
        .svg-solution {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 30px 0;
        }

        .comparison-item {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            position: relative;
        }

        .math-formula {
            background: #000;
            color: #0f0;
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            margin: 20px 0;
            font-size: 14px;
            line-height: 1.4;
        }

        .grid-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                linear-gradient(to right, rgba(255,0,0,0.1) 1px, transparent 1px),
                linear-gradient(to bottom, rgba(255,0,0,0.1) 1px, transparent 1px);
            background-size: 2px 2px;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <div class="analysis-container">
        <h1>🔬 图标对齐问题 - 数学精确分析</h1>

        <div class="demo-section">
            <h3>📐 数学计算：CSS三角形的重心偏移</h3>
            <div class="math-formula">
三角形参数：
- border-left: 18px (底边)
- border-top/bottom: 12px (高度的一半)
- 总高度: 24px

几何重心计算：
- 对于直角三角形，重心距底边的距离 = 底边长度/3
- X偏移量 = 18px / 3 = 6px
- 几何重心位置：(6px, 12px) 相对于三角形左上角

视觉重心修正：
- 几何重心: 6px (33.33%)
- 视觉重心: 约 7px (38.89%) - 因为人眼感知偏差
- 最佳transform: translate(-38.89%, -50%)
            </div>
        </div>

        <div class="demo-section">
            <h3>📊 对比测试</h3>
            <div class="comparison-grid">
                <div class="comparison-item">
                    <h4>当前实现 (-42%)</h4>
                    <div class="reference-circle">
                        <div class="current-triangle"></div>
                        <div class="grid-overlay"></div>
                    </div>
                    <p>偏左过度</p>
                </div>
                
                <div class="comparison-item">
                    <h4>数学精确 (-38.89%)</h4>
                    <div class="reference-circle">
                        <div class="perfect-triangle"></div>
                        <div class="grid-overlay"></div>
                    </div>
                    <p>理论完美</p>
                </div>
                
                <div class="comparison-item">
                    <h4>SVG解决方案</h4>
                    <div class="reference-circle">
                        <svg class="svg-solution" width="18" height="24" viewBox="0 0 18 24">
                            <polygon points="0,12 18,6 18,18" fill="#0066ff"/>
                        </svg>
                        <div class="grid-overlay"></div>
                    </div>
                    <p>像素完美</p>
                </div>
            </div>
        </div>

        <div class="demo-section">
            <h3>🎯 最终解决方案对比</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                <div>
                    <h4>方案A：精确CSS Transform</h4>
                    <code style="background: #f0f0f0; padding: 10px; display: block; border-radius: 5px;">
transform: translate(-38.89%, -50%);
                    </code>
                    <p>✅ 简单快速<br>✅ 兼容性好<br>⚠️ 仍有微小视觉偏差</p>
                </div>
                <div>
                    <h4>方案B：SVG图标</h4>
                    <code style="background: #f0f0f0; padding: 10px; display: block; border-radius: 5px;">
&lt;svg width="18" height="24"&gt;
  &lt;polygon points="0,12 18,6 18,18"/&gt;
&lt;/svg&gt;
                    </code>
                    <p>✅ 像素级精确<br>✅ 可缩放<br>✅ 颜色灵活</p>
                </div>
            </div>
        </div>

        <div class="demo-section">
            <h3>💡 推荐最终实现</h3>
            <p><strong>采用SVG方案 - 彻底解决对齐问题</strong></p>
            <ol>
                <li>使用SVG替换CSS三角形，确保像素级精确</li>
                <li>保持相同的尺寸和颜色</li>
                <li>完美的数学中心对齐</li>
                <li>未来可扩展性更好</li>
            </ol>
        </div>
    </div>

    <script>
        console.log('🔬 数学分析：');
        console.log('CSS三角形几何重心：', '6px (33.33%)');
        console.log('人眼视觉重心修正：', '7px (38.89%)');
        console.log('当前transform：', '-42% (偏左过度)');
        console.log('推荐transform：', '-38.89% (理论完美)');
        console.log('最佳方案：', 'SVG图标 (像素级精确)');
    </script>
</body>
</html>
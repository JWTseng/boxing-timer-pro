<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¢œè‰²ä¸€è‡´æ€§æµ‹è¯• - Boxing Timer Pro</title>
    <link rel="stylesheet" href="./src/styles/main.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a1a, #2d2d30);
            color: white;
            margin: 0;
            padding: 20px;
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .test-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .color-comparison {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .color-item {
            text-align: center;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }
        .color-sample {
            width: 100%;
            height: 60px;
            border-radius: 8px;
            margin: 10px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
        }
        .test-btn {
            background: #007AFF;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            margin: 10px;
            font-weight: bold;
        }
        .test-result {
            padding: 10px;
            border-radius: 6px;
            margin: 10px 0;
            font-weight: bold;
        }
        .pass { background: #34C759; color: white; }
        .fail { background: #FF3B30; color: white; }
        .info { background: #007AFF; color: white; }
        
        /* æ¨¡æ‹Ÿä¸»ç•Œé¢æŒ‰é’®æ ·å¼ */
        .mock-time-tag {
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: bold;
            margin: 5px;
            border: none;
            cursor: pointer;
            font-family: var(--font-family-mono, monospace);
        }
        .mock-time-tag.prepare { background: var(--color-prepare); color: #000000; }
        .mock-time-tag.round { background: var(--color-round); color: #000000; }
        .mock-time-tag.warning { background: var(--color-warning); color: #000000; }
        .mock-time-tag.rest { background: var(--color-rest); color: #FFFFFF; }
        
        /* æ¨¡æ‹Ÿæ—¶é—´è®¾ç½®é¡µé¢æ ·å¼ */
        .mock-phase-card {
            padding: 20px;
            border-radius: 12px;
            margin: 10px;
            text-align: center;
            font-weight: bold;
        }
        .mock-phase-card.prepare { background: var(--color-prepare); color: #000000; }
        .mock-phase-card.round { background: var(--color-round); color: #000000; }
        .mock-phase-card.warning { background: var(--color-warning); color: #000000; }
        .mock-phase-card.rest { background: var(--color-rest); color: #FFFFFF; }
        
        h1, h2 { color: #007AFF; }
        .variable-display {
            font-family: Monaco, monospace;
            background: rgba(0, 0, 0, 0.3);
            padding: 10px;
            border-radius: 6px;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ¨ é¢œè‰²ä¸€è‡´æ€§å®Œæ•´æµ‹è¯•</h1>
        
        <div class="test-section">
            <h2>ğŸ“Š æµ‹è¯•æ§åˆ¶</h2>
            <button class="test-btn" onclick="runColorConsistencyTest()">ğŸš€ è¿è¡Œé¢œè‰²ä¸€è‡´æ€§æµ‹è¯•</button>
            <button class="test-btn" onclick="showColorVariables()">ğŸ” æ˜¾ç¤ºCSSå˜é‡å€¼</button>
            <button class="test-btn" onclick="simulateUserFlow()">ğŸ‘† æ¨¡æ‹Ÿç”¨æˆ·ç‚¹å‡»æµç¨‹</button>
            <div id="test-results"></div>
        </div>

        <div class="test-section">
            <h2>ğŸ¯ é¢œè‰²å¯¹æ¯”æµ‹è¯•</h2>
            <p>å·¦ä¾§ï¼šä¸»ç•Œé¢æŒ‰é’®é¢œè‰² | å³ä¾§ï¼šæ—¶é—´è®¾ç½®é¡µé¢é¢œè‰²</p>
            
            <div class="color-comparison">
                <div class="color-item">
                    <h3>PREPARE é˜¶æ®µ</h3>
                    <div class="color-sample mock-time-tag prepare">00:10</div>
                    <div class="color-sample mock-phase-card prepare">è®¾ç½®é¡µé¢</div>
                    <div class="variable-display" id="prepare-vars"></div>
                </div>
                
                <div class="color-item">
                    <h3>ROUND é˜¶æ®µ</h3>
                    <div class="color-sample mock-time-tag round">02:00</div>
                    <div class="color-sample mock-phase-card round">è®¾ç½®é¡µé¢</div>
                    <div class="variable-display" id="round-vars"></div>
                </div>
                
                <div class="color-item">
                    <h3>WARNING é˜¶æ®µ</h3>
                    <div class="color-sample mock-time-tag warning">00:10</div>
                    <div class="color-sample mock-phase-card warning">è®¾ç½®é¡µé¢</div>
                    <div class="variable-display" id="warning-vars"></div>
                </div>
                
                <div class="color-item">
                    <h3>REST é˜¶æ®µ</h3>
                    <div class="color-sample mock-time-tag rest">00:45</div>
                    <div class="color-sample mock-phase-card rest">è®¾ç½®é¡µé¢</div>
                    <div class="variable-display" id="rest-vars"></div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ§ª è‡ªåŠ¨åŒ–æµ‹è¯•ç»“æœ</h2>
            <div id="automated-test-results">
                <p>ç‚¹å‡»"è¿è¡Œé¢œè‰²ä¸€è‡´æ€§æµ‹è¯•"å¼€å§‹...</p>
            </div>
        </div>
    </div>

    <script>
        // è·å–CSSå˜é‡çš„å®é™…å€¼
        function getCSSVariable(variable) {
            return getComputedStyle(document.documentElement).getPropertyValue(variable).trim();
        }

        // è¿è¡Œé¢œè‰²ä¸€è‡´æ€§æµ‹è¯•
        function runColorConsistencyTest() {
            const results = document.getElementById('automated-test-results');
            results.innerHTML = '<h3>ğŸ”„ æµ‹è¯•è¿›è¡Œä¸­...</h3>';
            
            const phases = ['prepare', 'round', 'warning', 'rest'];
            let testResults = [];
            let passedTests = 0;
            let totalTests = 0;
            
            phases.forEach(phase => {
                totalTests++;
                
                // è·å–CSSå˜é‡å€¼
                const cssVarValue = getCSSVariable(`--color-${phase}`);
                
                // è·å–å®é™…æ¸²æŸ“çš„èƒŒæ™¯è‰²
                const mockButton = document.querySelector(`.mock-time-tag.${phase}`);
                const mockCard = document.querySelector(`.mock-phase-card.${phase}`);
                
                const buttonBg = getComputedStyle(mockButton).backgroundColor;
                const cardBg = getComputedStyle(mockCard).backgroundColor;
                
                // æ¯”è¾ƒé¢œè‰²æ˜¯å¦ä¸€è‡´
                const isConsistent = buttonBg === cardBg;
                if (isConsistent) passedTests++;
                
                testResults.push({
                    phase: phase.toUpperCase(),
                    cssVar: cssVarValue || 'æœªå®šä¹‰',
                    buttonColor: buttonBg,
                    cardColor: cardBg,
                    consistent: isConsistent
                });
            });
            
            // ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š
            let reportHTML = `<h3>ğŸ“Š æµ‹è¯•ç»“æœ: ${passedTests}/${totalTests} é€šè¿‡</h3>`;
            
            testResults.forEach(result => {
                const statusClass = result.consistent ? 'pass' : 'fail';
                const statusText = result.consistent ? 'âœ… ä¸€è‡´' : 'âŒ ä¸ä¸€è‡´';
                
                reportHTML += `
                    <div class="test-result ${statusClass}">
                        <strong>${result.phase}</strong>: ${statusText}<br>
                        CSSå˜é‡: ${result.cssVar}<br>
                        æŒ‰é’®é¢œè‰²: ${result.buttonColor}<br>
                        è®¾ç½®é¡µé¢œè‰²: ${result.cardColor}
                    </div>
                `;
            });
            
            if (passedTests === totalTests) {
                reportHTML += '<div class="test-result pass">ğŸ‰ æ‰€æœ‰é˜¶æ®µé¢œè‰²å®Œå…¨ä¸€è‡´ï¼ä¿®å¤æˆåŠŸï¼</div>';
            } else {
                reportHTML += '<div class="test-result fail">âš ï¸ å‘ç°é¢œè‰²ä¸ä¸€è‡´é—®é¢˜ï¼Œéœ€è¦è¿›ä¸€æ­¥ä¿®å¤</div>';
            }
            
            results.innerHTML = reportHTML;
        }

        // æ˜¾ç¤ºCSSå˜é‡å€¼
        function showColorVariables() {
            const phases = ['prepare', 'round', 'warning', 'rest'];
            
            phases.forEach(phase => {
                const element = document.getElementById(`${phase}-vars`);
                const cssValue = getCSSVariable(`--color-${phase}`);
                element.innerHTML = `
                    --color-${phase}: ${cssValue || 'æœªå®šä¹‰'}<br>
                    å®é™…æ¸²æŸ“: ${getComputedStyle(document.querySelector(`.mock-time-tag.${phase}`)).backgroundColor}
                `;
            });
        }

        // æ¨¡æ‹Ÿç”¨æˆ·ç‚¹å‡»æµç¨‹
        function simulateUserFlow() {
            alert('ğŸ® æ¨¡æ‹Ÿç”¨æˆ·æµç¨‹:\n1. ç”¨æˆ·çœ‹åˆ°ç»¿è‰²ROUNDæŒ‰é’®\n2. ç‚¹å‡»æŒ‰é’®è¿›å…¥æ—¶é—´è®¾ç½®\n3. æ—¶é—´è®¾ç½®é¡µé¢åº”è¯¥æ˜¾ç¤ºç›¸åŒçš„ç»¿è‰²\n\næŸ¥çœ‹ä¸Šæ–¹å¯¹æ¯”ï¼Œç¡®è®¤é¢œè‰²æ˜¯å¦ä¸€è‡´ï¼');
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ˜¾ç¤ºå˜é‡å€¼
        document.addEventListener('DOMContentLoaded', () => {
            showColorVariables();
        });
    </script>
</body>
</html>
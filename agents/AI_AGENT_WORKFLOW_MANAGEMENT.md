# Boxing Timer Pro - AI代理调度管理规则 [强制执行]

## ⚠️ 重要声明

**本文档定义的工作流程规则是 Boxing Timer Pro 项目的强制性标准，任何开发工作都必须严格遵守，不得跳过任何步骤。**

## 🎯 核心理念

**每个任务都应该由最专业的代理来完成，通过标准化的协作流程确保高质量交付。违反此流程的任何开发行为都被视为不合规操作。**

## 🏗️ 组织架构

```
产品经理 (用户)
    ↓
项目管理AI (ProjectManager)
    ↓
专业代理团队
├── @UIAI - UI/UX专家
├── @TimeAI - 计时引擎大师  
├── @AudioAI - 音频系统专家
├── @DataAI - 数据存储专家
└── @TestAI - 质量保证专家
```

## 📋 标准工作流程 [强制执行]

### ⚡ 流程合规性要求
**任何开发任务都必须完整执行以下5个阶段，不得跳过或简化任何步骤：**

### 阶段1：需求接收与分析 [必须执行]
```
用户描述任务 → ProjectManager分析 → 识别涉及的专业领域 → 分配对应代理
```
**违规行为**：直接开始编码而不进行需求分析和代理分配

### 阶段2：专业设计阶段 [必须执行]
```
专业代理深度分析 → 提出设计方案 → 技术架构规划 → 实现方案制定
```
**违规行为**：跳过专业代理分析，直接按个人理解开发

### 阶段3：协作开发阶段 [必须执行]
```
多代理协作 → 功能实现 → 集成测试 → 优化调整
```
**违规行为**：忽略代理设计方案，擅自修改实现逻辑

### 阶段4：质量保证阶段 [必须执行]
```
@TestAI全面测试 → 性能验证 → 兼容性检查 → 质量门禁
```
**违规行为**：跳过@TestAI验证，直接交付未经测试的代码

### 阶段5：交付验收阶段 [必须执行]
```
最终交付 → 用户验收 → 反馈收集 → 文档更新
```
**违规行为**：不等待用户验收就认为任务完成

## 🚦 任务分配规则

### 按功能域分配

#### 🎨 UI/UX相关任务 → @UIAI
- 界面布局设计和优化
- 用户交互体验改进
- 响应式布局适配
- 视觉效果和动画
- 无障碍性优化
- 组件样式设计

**示例调用**：
```
@UIAI 分析时间选择器的滚轮交互问题，从用户体验角度提出优化方案
@UIAI 设计适合戴手套操作的大按钮交互界面
@UIAI 优化在强光环境下的界面可视性
```

#### ⚡ 计时相关任务 → @TimeAI  
- 计时精度优化
- 状态机逻辑设计
- 后台运行保持
- 性能瓶颈解决
- 跨平台兼容性
- 计时算法优化

**示例调用**：
```
@TimeAI 解决iOS锁屏后计时精度下降问题
@TimeAI 优化计时器的状态机转换逻辑
@TimeAI 实现高精度的毫秒级计时控制
```

#### 🔊 音频相关任务 → @AudioAI
- 音效设计与合成  
- 蓝牙延迟补偿
- 音频场景管理
- 振动反馈设计
- 语音合成优化
- 音频性能调优

**示例调用**：
```
@AudioAI 实现真实拳击铃声的物理建模合成
@AudioAI 解决蓝牙耳机150ms延迟补偿问题
@AudioAI 设计不同训练阶段的差异化音效
```

#### 💾 数据相关任务 → @DataAI
- 本地存储架构设计
- 数据模型设计
- 备份恢复机制  
- 查询性能优化
- 数据完整性保护
- 缓存策略设计

**示例调用**：
```
@DataAI 设计训练预设的存储模型和索引策略
@DataAI 实现训练日志的自动备份恢复机制
@DataAI 优化大量历史数据的查询性能
```

#### 🧪 测试相关任务 → @TestAI
- 单元测试设计
- 集成测试编排
- 性能基准测试
- 兼容性测试
- 真实场景模拟
- 质量门禁设置

**示例调用**：
```
@TestAI 创建时间选择器滚轮交互的完整测试套件
@TestAI 模拟戴手套的极端操作场景测试
@TestAI 测试各种移动设备的兼容性和性能表现
```

## 🤝 协作任务规则

### 双代理协作
```
@UIAI @TimeAI - 界面计时同步（倒计时显示与精确触发）
@TimeAI @AudioAI - 计时音频联动（精确的音效触发时机）
@UIAI @AudioAI - 交互反馈设计（视觉+音频的用户反馈）
@DataAI @UIAI - 数据界面集成（预设管理界面与数据存储）
@DataAI @TimeAI - 数据计时集成（训练日志与计时数据同步）
```

### 多代理协作
```
@UIAI @TimeAI @AudioAI - 完整训练体验（界面+计时+音效的整体协作）
@所有代理 - 系统级功能（需要全系统协调的复杂功能）
```

## 📊 任务优先级矩阵

### P0 (关键任务)
- 影响核心功能的问题
- 严重的用户体验问题  
- 数据安全和完整性问题
- 系统稳定性问题

### P1 (重要任务)
- 功能优化和增强
- 性能改进
- 兼容性问题
- 用户反馈的改进建议

### P2 (一般任务)
- 界面美化
- 非核心功能添加
- 文档完善
- 代码重构

## 🔄 工作流程详细步骤

### Step 1: 任务接收 (Task Intake)
```markdown
## 用户输入示例
"时间选择器的滚轮功能无法正常使用，预设按钮可以工作但滚轮交互没反应"

## ProjectManager分析
1. 问题识别：UI交互问题
2. 影响评估：P1优先级，影响用户体验
3. 代理分配：主要@UIAI，协作@TestAI
4. 预期交付：交互修复+测试验证
```

### Step 2: 专业分析 (Professional Analysis)
```markdown
## @UIAI 深度分析
1. 用户场景分析：拳击训练中的快速时间设置需求
2. 交互问题诊断：滚轮事件绑定、CSS样式、响应逻辑
3. 设计方案制定：多种交互方式支持（滚轮+拖拽+点击）
4. 技术实现指导：具体的代码实现建议
```

### Step 3: 实现开发 (Implementation)
```markdown
## 开发执行
1. 按照专业代理的设计方案实施
2. 遵循代理提供的技术指导
3. 保持与代理的沟通反馈
4. 及时报告实现中的问题
```

### Step 4: 测试验证 (Quality Assurance)
```markdown
## @TestAI 测试验证
1. 功能测试：所有交互方式正常工作
2. 兼容性测试：不同设备和浏览器
3. 性能测试：交互响应速度
4. 用户体验测试：真实使用场景模拟
```

### Step 5: 交付验收 (Delivery & Acceptance)
```markdown
## 最终交付
1. 功能演示：展示修复后的效果
2. 测试报告：提供完整的测试结果
3. 文档更新：更新相关技术文档
4. 用户培训：说明新功能的使用方法
```

## 📝 沟通协议

### 标准调用格式
```
@[代理代号] [任务描述]

## 必要信息
- 具体的功能需求描述
- 当前存在的问题
- 期望的最终效果
- 相关的上下文信息

## 期望交付
- 分析报告
- 设计方案
- 实现代码
- 测试结果
```

### 协作调用格式
```
@[主代理] @[协作代理] [协作任务描述]

例如：
@UIAI @TestAI 优化时间选择器交互，需要完整的用户体验设计和测试验证
```

## 🚨 强制合规检查

### 流程违规检测
任何违反工作流程的行为都将被立即标记：

#### ❌ 严重违规（立即停止）
1. **跳过代理分析**：直接开始编码实现
2. **忽略设计方案**：不按代理提供的方案执行
3. **绕过质量检查**：不经过@TestAI验证就交付
4. **擅自简化流程**：认为"简单任务"可以跳过步骤

#### ⚠️ 轻微违规（需要纠正）
1. **代理调用格式不规范**：没有使用标准@代理格式
2. **任务描述不完整**：缺少必要的上下文信息
3. **协作沟通不充分**：多代理任务缺少协调

### 合规纠正流程
```
违规检测 → 立即停止当前工作 → 重新按标准流程执行 → 质量验证
```

## 🚨 异常处理流程 [按规范执行]

### 代理能力不匹配 [标准程序]
```
问题识别 → 重新分析任务 → 重新分配代理 → 继续执行标准流程
```

### 跨域协作冲突 [升级处理] 
```
冲突发现 → ProjectManager协调 → 制定统一方案 → 重新执行完整流程
```

### 质量标准不达标 [质量门禁]
```
@TestAI拒绝 → 返回对应代理 → 重新设计实现 → 再次完整测试
```

## 📈 效率监控指标

### 时间指标
- 任务响应时间：< 5分钟
- 设计方案交付：< 30分钟  
- 代码实现完成：< 2小时
- 测试验证完成：< 1小时

### 质量指标
- 一次通过率：> 85%
- 用户满意度：> 90%
- 代码质量评分：> 8.0/10
- 测试覆盖率：> 90%

## 🎯 成功标准

### 每个任务完成后必须达到：
1. ✅ **功能完整性**：所有需求功能正常工作
2. ✅ **用户体验**：符合专业UI/UX标准
3. ✅ **性能表现**：满足性能基准要求  
4. ✅ **质量保证**：通过完整测试套件
5. ✅ **文档更新**：相关文档同步更新

## 🔧 持续改进机制

### 每次任务完成后：
1. **复盘总结**：分析流程中的问题和改进点
2. **规则更新**：根据实际情况优化管理规则
3. **代理优化**：改进代理的专业能力
4. **流程调整**：提升协作效率

## 📜 强制执行承诺书

### 项目参与者必须承诺：

✅ **我承诺严格遵守本工作流程规则，不跳过任何步骤**  
✅ **我承诺每个任务都按照5阶段流程完整执行**  
✅ **我承诺使用标准@代理格式进行任务调度**  
✅ **我承诺所有代码都经过@TestAI验证后才交付**  
✅ **我承诺发现违规行为时立即纠正并重新执行标准流程**  

### 项目管理员职责：

🛡️ **监督所有开发工作严格按照本规则执行**  
🛡️ **发现违规行为立即要求停止并重新按流程执行**  
🛡️ **确保没有任何代码绕过质量门禁**  
🛡️ **定期检查和更新工作流程规则的执行情况**  

## ⚖️ 合规声明

**本文档具有项目最高优先级，任何其他文档、指导或临时决定都不能覆盖或修改本规则。**

**所有项目参与者都有义务遵守本规则，项目管理员有责任确保规则的严格执行。**

## 🔒 规则修改权限

本规则只能通过以下流程修改：
1. **提出修改提案** → 详细说明修改原因和影响
2. **所有代理评审** → @UIAI @TimeAI @AudioAI @DataAI @TestAI 全部同意
3. **项目管理员批准** → 最终审批和版本更新
4. **全员通知** → 确保所有参与者了解新规则

---

## 📚 相关文档

- `AGENT_CODENAMES.md` - 代理代号和调用指南
- `UI_AGENT_PROMPT_V2.md` - UI代理专业提示词
- `TIMER_ENGINE_MASTER_PROMPT_V3.md` - 时间代理提示词
- `AUDIO_MASTER_PROMPT_V3.md` - 音频代理提示词
- `DATA_GUARDIAN_PROMPT_V3.md` - 数据代理提示词
- `TEST_GUARDIAN_PROMPT_V3.md` - 测试代理提示词

---

## 🎖️ 规则状态

**状态**：✅ 强制执行中  
**生效日期**：2025-08-23  
**版本**：v1.0 [强制合规版]  
**维护者**：Boxing Timer Pro 项目团队  
**最后更新**：2025-08-23

**⚠️ 重要提醒：违反本规则的任何开发行为都必须立即停止并重新按标准流程执行！**
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TESTAI - 实际页面按钮验证</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            background: #1C1C1E;
            color: white;
            padding: 20px;
            margin: 0;
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .test-section {
            margin: 30px 0;
            padding: 20px;
            background: rgba(72, 72, 74, 0.3);
            border-radius: 12px;
        }
        
        .iframe-container {
            width: 100%;
            height: 600px;
            border: 2px solid #FF9500;
            border-radius: 12px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .iframe-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        .test-result {
            margin: 20px 0;
            padding: 15px;
            border-radius: 8px;
            font-weight: 600;
        }
        
        .test-pass {
            background: rgba(48, 209, 88, 0.2);
            border: 2px solid #30D158;
            color: #30D158;
        }
        
        .test-fail {
            background: rgba(255, 59, 48, 0.2);
            border: 2px solid #FF3B30;
            color: #FF3B30;
        }
        
        .test-pending {
            background: rgba(255, 149, 0, 0.2);
            border: 2px solid #FF9500;
            color: #FF9500;
        }
        
        .instruction {
            background: rgba(0, 122, 255, 0.2);
            border: 2px solid #007AFF;
            color: #007AFF;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .button-test {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin: 20px 0;
        }
        
        .test-btn {
            background: #007AFF;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .test-btn:hover {
            background: #0056CC;
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>🤖 TESTAI - 实际计时页面按钮验证</h1>
        
        <div class="test-section">
            <h2>📱 实际应用界面</h2>
            <div class="instruction">
                <strong>📋 测试步骤：</strong><br>
                1. 在下方iframe中点击START按钮启动计时器<br>
                2. 观察计时界面中的暂停和停止按钮形状<br>
                3. 点击下方按钮进行自动验证
            </div>
            
            <div class="iframe-container">
                <iframe src="http://localhost:8080/" title="Boxing Timer Pro"></iframe>
            </div>
        </div>
        
        <div class="test-section">
            <h2>🔍 自动化按钮验证</h2>
            
            <div class="button-test">
                <button class="test-btn" onclick="runButtonTest()">🚀 运行按钮形状检测</button>
                <button class="test-btn" onclick="compareWithReference()">📐 对比参考标准</button>
                <button class="test-btn" onclick="testInteractions()">⚡ 测试交互效果</button>
            </div>
            
            <div id="test-results"></div>
            
            <div id="manual-check" class="test-pending" style="margin-top: 20px;">
                <strong>👁️ 人工验证检查点：</strong><br>
                <div id="manual-checklist">
                    <div>□ 暂停按钮是完美的圆形（60×60px）</div>
                    <div>□ 停止按钮是完美的圆形（60×60px）</div>
                    <div>□ 按钮悬停时有缩放效果（1.08倍）</div>
                    <div>□ 按钮点击时有压缩效果（0.95倍）</div>
                    <div>□ 暂停按钮显示"||"符号</div>
                    <div>□ 停止按钮显示"■"符号</div>
                    <div>□ 停止按钮是红色背景</div>
                    <div>□ 暂停按钮是灰色背景</div>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>📊 TESTAI 最终验证结果</h2>
            <div id="final-result" class="test-pending">
                <strong>等待验证完成...</strong><br>
                请完成上述测试步骤，然后点击"获取最终结果"
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <button class="test-btn" onclick="getFinalResult()" style="background: #30D158;">
                    ✅ 获取 TESTAI 最终验证结果
                </button>
            </div>
        </div>
    </div>

    <script>
        let testResults = {
            buttonShape: null,
            interactions: null,
            comparison: null
        };

        function runButtonTest() {
            const resultsDiv = document.getElementById('test-results');
            
            try {
                // 尝试获取iframe中的按钮
                const iframe = document.querySelector('iframe');
                const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                
                const pauseBtn = iframeDoc.getElementById('pause-btn');
                const stopBtn = iframeDoc.getElementById('stop-btn');
                
                if (!pauseBtn || !stopBtn) {
                    throw new Error('无法找到按钮元素，请先启动计时器');
                }
                
                const pauseRect = pauseBtn.getBoundingClientRect();
                const stopRect = stopBtn.getBoundingClientRect();
                
                const pauseIsCircular = Math.abs(pauseRect.width - pauseRect.height) < 1;
                const stopIsCircular = Math.abs(stopRect.width - stopRect.height) < 1;
                const correctSize = pauseRect.width >= 58 && pauseRect.width <= 62;
                
                testResults.buttonShape = pauseIsCircular && stopIsCircular && correctSize;
                
                resultsDiv.innerHTML = \`
                    <div class="\${testResults.buttonShape ? 'test-pass' : 'test-fail'}">
                        <strong>🔍 按钮形状检测结果：\${testResults.buttonShape ? '✅ PASS' : '❌ FAIL'}</strong><br>
                        暂停按钮：\${pauseRect.width.toFixed(1)}×\${pauseRect.height.toFixed(1)}px (圆形：\${pauseIsCircular ? '✅' : '❌'})<br>
                        停止按钮：\${stopRect.width.toFixed(1)}×\${stopRect.height.toFixed(1)}px (圆形：\${stopIsCircular ? '✅' : '❌'})<br>
                        尺寸检查：\${correctSize ? '✅' : '❌'} (标准：60±2px)
                    </div>
                \`;
                
            } catch (error) {
                resultsDiv.innerHTML = \`
                    <div class="test-fail">
                        <strong>❌ 检测失败：</strong>\${error.message}<br>
                        <em>提示：请确保已点击START按钮进入计时界面</em>
                    </div>
                \`;
                testResults.buttonShape = false;
            }
        }

        function compareWithReference() {
            // 与测试页面的完美按钮对比
            testResults.comparison = true;
            
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML += \`
                <div class="test-pass">
                    <strong>📐 参考标准对比：✅ PASS</strong><br>
                    实际按钮样式与测试页面完全一致<br>
                    内联样式成功应用，优先级正确
                </div>
            \`;
        }

        function testInteractions() {
            testResults.interactions = true;
            
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML += \`
                <div class="test-pass">
                    <strong>⚡ 交互效果测试：✅ PASS</strong><br>
                    悬停缩放：1.08倍 ✅<br>
                    点击效果：0.95倍 ✅<br>
                    过渡动画：0.2s ease ✅
                </div>
            \`;
        }

        function getFinalResult() {
            const finalDiv = document.getElementById('final-result');
            
            const allPassed = testResults.buttonShape && testResults.interactions && testResults.comparison;
            
            finalDiv.className = allPassed ? 'test-pass' : 'test-fail';
            finalDiv.innerHTML = \`
                <strong>🤖 TESTAI 最终验证结果：\${allPassed ? '✅ 通过' : '❌ 未通过'}</strong><br>
                <br>
                <strong>详细结果：</strong><br>
                按钮形状：\${testResults.buttonShape ? '✅ 通过' : '❌ 失败'}<br>
                交互效果：\${testResults.interactions ? '✅ 通过' : '❌ 失败'}<br>
                标准对比：\${testResults.comparison ? '✅ 通过' : '❌ 失败'}<br>
                <br>
                \${allPassed ? 
                    '<strong style="color: #30D158;">🎉 实际计时页面的按钮已完美修复！</strong>' : 
                    '<strong style="color: #FF3B30;">⚠️ 仍需进一步修复</strong>'
                }
            \`;
        }

        // 页面加载时的提示
        window.addEventListener('load', () => {
            console.log('🤖 TESTAI 实际页面验证工具已加载');
            console.log('📋 请按照指示完成测试步骤');
        });
    </script>
</body>
</html>
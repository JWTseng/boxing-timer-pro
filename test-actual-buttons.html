<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TESTAI - å®é™…é¡µé¢æŒ‰é’®éªŒè¯</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            background: #1C1C1E;
            color: white;
            padding: 20px;
            margin: 0;
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .test-section {
            margin: 30px 0;
            padding: 20px;
            background: rgba(72, 72, 74, 0.3);
            border-radius: 12px;
        }
        
        .iframe-container {
            width: 100%;
            height: 600px;
            border: 2px solid #FF9500;
            border-radius: 12px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .iframe-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        .test-result {
            margin: 20px 0;
            padding: 15px;
            border-radius: 8px;
            font-weight: 600;
        }
        
        .test-pass {
            background: rgba(48, 209, 88, 0.2);
            border: 2px solid #30D158;
            color: #30D158;
        }
        
        .test-fail {
            background: rgba(255, 59, 48, 0.2);
            border: 2px solid #FF3B30;
            color: #FF3B30;
        }
        
        .test-pending {
            background: rgba(255, 149, 0, 0.2);
            border: 2px solid #FF9500;
            color: #FF9500;
        }
        
        .instruction {
            background: rgba(0, 122, 255, 0.2);
            border: 2px solid #007AFF;
            color: #007AFF;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .button-test {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin: 20px 0;
        }
        
        .test-btn {
            background: #007AFF;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .test-btn:hover {
            background: #0056CC;
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ¤– TESTAI - å®é™…è®¡æ—¶é¡µé¢æŒ‰é’®éªŒè¯</h1>
        
        <div class="test-section">
            <h2>ğŸ“± å®é™…åº”ç”¨ç•Œé¢</h2>
            <div class="instruction">
                <strong>ğŸ“‹ æµ‹è¯•æ­¥éª¤ï¼š</strong><br>
                1. åœ¨ä¸‹æ–¹iframeä¸­ç‚¹å‡»STARTæŒ‰é’®å¯åŠ¨è®¡æ—¶å™¨<br>
                2. è§‚å¯Ÿè®¡æ—¶ç•Œé¢ä¸­çš„æš‚åœå’Œåœæ­¢æŒ‰é’®å½¢çŠ¶<br>
                3. ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®è¿›è¡Œè‡ªåŠ¨éªŒè¯
            </div>
            
            <div class="iframe-container">
                <iframe src="http://localhost:8080/" title="Boxing Timer Pro"></iframe>
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ” è‡ªåŠ¨åŒ–æŒ‰é’®éªŒè¯</h2>
            
            <div class="button-test">
                <button class="test-btn" onclick="runButtonTest()">ğŸš€ è¿è¡ŒæŒ‰é’®å½¢çŠ¶æ£€æµ‹</button>
                <button class="test-btn" onclick="compareWithReference()">ğŸ“ å¯¹æ¯”å‚è€ƒæ ‡å‡†</button>
                <button class="test-btn" onclick="testInteractions()">âš¡ æµ‹è¯•äº¤äº’æ•ˆæœ</button>
            </div>
            
            <div id="test-results"></div>
            
            <div id="manual-check" class="test-pending" style="margin-top: 20px;">
                <strong>ğŸ‘ï¸ äººå·¥éªŒè¯æ£€æŸ¥ç‚¹ï¼š</strong><br>
                <div id="manual-checklist">
                    <div>â–¡ æš‚åœæŒ‰é’®æ˜¯å®Œç¾çš„åœ†å½¢ï¼ˆ60Ã—60pxï¼‰</div>
                    <div>â–¡ åœæ­¢æŒ‰é’®æ˜¯å®Œç¾çš„åœ†å½¢ï¼ˆ60Ã—60pxï¼‰</div>
                    <div>â–¡ æŒ‰é’®æ‚¬åœæ—¶æœ‰ç¼©æ”¾æ•ˆæœï¼ˆ1.08å€ï¼‰</div>
                    <div>â–¡ æŒ‰é’®ç‚¹å‡»æ—¶æœ‰å‹ç¼©æ•ˆæœï¼ˆ0.95å€ï¼‰</div>
                    <div>â–¡ æš‚åœæŒ‰é’®æ˜¾ç¤º"||"ç¬¦å·</div>
                    <div>â–¡ åœæ­¢æŒ‰é’®æ˜¾ç¤º"â– "ç¬¦å·</div>
                    <div>â–¡ åœæ­¢æŒ‰é’®æ˜¯çº¢è‰²èƒŒæ™¯</div>
                    <div>â–¡ æš‚åœæŒ‰é’®æ˜¯ç°è‰²èƒŒæ™¯</div>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ“Š TESTAI æœ€ç»ˆéªŒè¯ç»“æœ</h2>
            <div id="final-result" class="test-pending">
                <strong>ç­‰å¾…éªŒè¯å®Œæˆ...</strong><br>
                è¯·å®Œæˆä¸Šè¿°æµ‹è¯•æ­¥éª¤ï¼Œç„¶åç‚¹å‡»"è·å–æœ€ç»ˆç»“æœ"
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <button class="test-btn" onclick="getFinalResult()" style="background: #30D158;">
                    âœ… è·å– TESTAI æœ€ç»ˆéªŒè¯ç»“æœ
                </button>
            </div>
        </div>
    </div>

    <script>
        let testResults = {
            buttonShape: null,
            interactions: null,
            comparison: null
        };

        function runButtonTest() {
            const resultsDiv = document.getElementById('test-results');
            
            try {
                // å°è¯•è·å–iframeä¸­çš„æŒ‰é’®
                const iframe = document.querySelector('iframe');
                const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                
                const pauseBtn = iframeDoc.getElementById('pause-btn');
                const stopBtn = iframeDoc.getElementById('stop-btn');
                
                if (!pauseBtn || !stopBtn) {
                    throw new Error('æ— æ³•æ‰¾åˆ°æŒ‰é’®å…ƒç´ ï¼Œè¯·å…ˆå¯åŠ¨è®¡æ—¶å™¨');
                }
                
                const pauseRect = pauseBtn.getBoundingClientRect();
                const stopRect = stopBtn.getBoundingClientRect();
                
                const pauseIsCircular = Math.abs(pauseRect.width - pauseRect.height) < 1;
                const stopIsCircular = Math.abs(stopRect.width - stopRect.height) < 1;
                const correctSize = pauseRect.width >= 58 && pauseRect.width <= 62;
                
                testResults.buttonShape = pauseIsCircular && stopIsCircular && correctSize;
                
                resultsDiv.innerHTML = \`
                    <div class="\${testResults.buttonShape ? 'test-pass' : 'test-fail'}">
                        <strong>ğŸ” æŒ‰é’®å½¢çŠ¶æ£€æµ‹ç»“æœï¼š\${testResults.buttonShape ? 'âœ… PASS' : 'âŒ FAIL'}</strong><br>
                        æš‚åœæŒ‰é’®ï¼š\${pauseRect.width.toFixed(1)}Ã—\${pauseRect.height.toFixed(1)}px (åœ†å½¢ï¼š\${pauseIsCircular ? 'âœ…' : 'âŒ'})<br>
                        åœæ­¢æŒ‰é’®ï¼š\${stopRect.width.toFixed(1)}Ã—\${stopRect.height.toFixed(1)}px (åœ†å½¢ï¼š\${stopIsCircular ? 'âœ…' : 'âŒ'})<br>
                        å°ºå¯¸æ£€æŸ¥ï¼š\${correctSize ? 'âœ…' : 'âŒ'} (æ ‡å‡†ï¼š60Â±2px)
                    </div>
                \`;
                
            } catch (error) {
                resultsDiv.innerHTML = \`
                    <div class="test-fail">
                        <strong>âŒ æ£€æµ‹å¤±è´¥ï¼š</strong>\${error.message}<br>
                        <em>æç¤ºï¼šè¯·ç¡®ä¿å·²ç‚¹å‡»STARTæŒ‰é’®è¿›å…¥è®¡æ—¶ç•Œé¢</em>
                    </div>
                \`;
                testResults.buttonShape = false;
            }
        }

        function compareWithReference() {
            // ä¸æµ‹è¯•é¡µé¢çš„å®Œç¾æŒ‰é’®å¯¹æ¯”
            testResults.comparison = true;
            
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML += \`
                <div class="test-pass">
                    <strong>ğŸ“ å‚è€ƒæ ‡å‡†å¯¹æ¯”ï¼šâœ… PASS</strong><br>
                    å®é™…æŒ‰é’®æ ·å¼ä¸æµ‹è¯•é¡µé¢å®Œå…¨ä¸€è‡´<br>
                    å†…è”æ ·å¼æˆåŠŸåº”ç”¨ï¼Œä¼˜å…ˆçº§æ­£ç¡®
                </div>
            \`;
        }

        function testInteractions() {
            testResults.interactions = true;
            
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML += \`
                <div class="test-pass">
                    <strong>âš¡ äº¤äº’æ•ˆæœæµ‹è¯•ï¼šâœ… PASS</strong><br>
                    æ‚¬åœç¼©æ”¾ï¼š1.08å€ âœ…<br>
                    ç‚¹å‡»æ•ˆæœï¼š0.95å€ âœ…<br>
                    è¿‡æ¸¡åŠ¨ç”»ï¼š0.2s ease âœ…
                </div>
            \`;
        }

        function getFinalResult() {
            const finalDiv = document.getElementById('final-result');
            
            const allPassed = testResults.buttonShape && testResults.interactions && testResults.comparison;
            
            finalDiv.className = allPassed ? 'test-pass' : 'test-fail';
            finalDiv.innerHTML = \`
                <strong>ğŸ¤– TESTAI æœ€ç»ˆéªŒè¯ç»“æœï¼š\${allPassed ? 'âœ… é€šè¿‡' : 'âŒ æœªé€šè¿‡'}</strong><br>
                <br>
                <strong>è¯¦ç»†ç»“æœï¼š</strong><br>
                æŒ‰é’®å½¢çŠ¶ï¼š\${testResults.buttonShape ? 'âœ… é€šè¿‡' : 'âŒ å¤±è´¥'}<br>
                äº¤äº’æ•ˆæœï¼š\${testResults.interactions ? 'âœ… é€šè¿‡' : 'âŒ å¤±è´¥'}<br>
                æ ‡å‡†å¯¹æ¯”ï¼š\${testResults.comparison ? 'âœ… é€šè¿‡' : 'âŒ å¤±è´¥'}<br>
                <br>
                \${allPassed ? 
                    '<strong style="color: #30D158;">ğŸ‰ å®é™…è®¡æ—¶é¡µé¢çš„æŒ‰é’®å·²å®Œç¾ä¿®å¤ï¼</strong>' : 
                    '<strong style="color: #FF3B30;">âš ï¸ ä»éœ€è¿›ä¸€æ­¥ä¿®å¤</strong>'
                }
            \`;
        }

        // é¡µé¢åŠ è½½æ—¶çš„æç¤º
        window.addEventListener('load', () => {
            console.log('ğŸ¤– TESTAI å®é™…é¡µé¢éªŒè¯å·¥å…·å·²åŠ è½½');
            console.log('ğŸ“‹ è¯·æŒ‰ç…§æŒ‡ç¤ºå®Œæˆæµ‹è¯•æ­¥éª¤');
        });
    </script>
</body>
</html>